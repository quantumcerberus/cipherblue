name: cipherblue-nvidia
description: "A Security & Privacy Focused Operating System For Desktops"
base-image: quay.io/fedora/fedora-silverblue
image-version: latest
modules:
    - type: script
      scripts:
        - package-hardening.sh
    - type: rpm-ostree
      install:
        - openh264
    - type: script
      scripts:
        - httpsmirrors.sh
        - cipherblue-cleanup.sh
        - hardenuserns.sh
    - type: rpm-ostree
      repos: 
        - https://copr.fedorainfracloud.org/coprs/secureblue/trivalent/repo/fedora-%OS_VERSION%/secureblue-trivalent-fedora-%OS_VERSION%.repo
      install:
        - gnome-disk-utility
        - gnome-tweaks
        - trivalent
        - tlp
      remove:
        - dnf5
        - dnf-data
        - dnf5-plugins
    - type: files
      files:
        - source: system
          destination: /
    - type: gschema-overrides
      include:
        - zz1-cipherblue.gschema.override
    - type: script
      scripts:
        - cipherblue-cleanup.sh
        - authselect-hardening.sh
        - permission-hardening.sh
        - systemd-hardening.sh
        - selinux-hardening.sh
        - suid-hardening.sh
    - type: cipherblue-signing
      source: local
